<div class="layaout">
  <mat-card>
     <div *ngIf="isLoadding" class="loadding">
      <img src="https://idbclinicas.com/wp-content/uploads/2017/09/loader.gif" alt="20px" width="300px">
    </div>
    <mat-card-content *ngIf="!flag && !newpasswordbol && !isLoadding && !isCompleted">
      <h1>Restablecer Contraseña</h1>
      <form [formGroup]="resetForms">
        <mat-form-field class="full-width-input">
          <input matInput type="text" (keydown)='changeInput(user.value)' #user required placeholder="Introduzca su usuario (Ej. 26641227)" formControlName="cedula">
        </mat-form-field>
        <br>
        <button type="submit" mat-raised-button style="margin-left: 13%;" [disabled]='enable'  (click)="send()">Enviar</button>
        <button  mat-raised-button  mat-dialog-close >Cancelar</button>
      </form>
    </mat-card-content>
    <mat-card-content *ngIf="flag && !newpasswordbol">
      <h1>Introduce el código de verificación enviado al correo</h1>
      <form [formGroup]="restablecer">
        <mat-form-field class="full-width-input" hidden>
          <input matInput type="text"  formControlName="cedula" [(ngModel)]='data.forgotCedula' value={{data.forgotCedula}}>
        </mat-form-field>
        <mat-form-field class="full-width-input">
          <input matInput type="text" placeholder="Introduce el codigo de verificación enviado al correo" formControlName="codigo">
        </mat-form-field>
        <button type="submit" style="width: 50%; margin-left: 25%;" mat-raised-button  (click)="sendcode()" >Enviar</button>
      </form>
    </mat-card-content>
    <mat-card-content *ngIf="newpasswordbol">
      <h1>Introduce la nueva contraseña</h1>
      <form [formGroup]="newpassword">
        <mat-form-field class="full-width-input" hidden>
          <input matInput type="text"  formControlName="cedula" [(ngModel)]='data.forgotCedula' value={{data.forgotCedula}}>
        </mat-form-field>
        <mat-form-field class="full-width-input">
          <input matInput type="text" placeholder="Introduce la nueva contraseña" formControlName="contrasena">
        </mat-form-field>
        <mat-form-field class="full-width-input">
          <input matInput type="text" placeholder="Repite nuevamente la contraseña" formControlName="newpasswordrepit">
        </mat-form-field>
        <button type="submit" style="width: 50%; margin-left: 25%;" mat-raised-button (click)="newPassword()">Enviar</button>
      </form>
    </mat-card-content>
    <mat-card-content style="text-align: center;" *ngIf="isCompleted">
      <h1>La contraseña se ha cambiado con éxito</h1>
      <button mat-raised-button mat-dialog-close>Aceptar</button>
    </mat-card-content>
    <div class="alert alert-secondary" style="margin-top: 1.5rem;text-align: left;" *ngIf="flagMsjx && !isLoadding">
      <p style="text-align: center;">{{msjx}}</p>
    </div>
  </mat-card>
</div>
